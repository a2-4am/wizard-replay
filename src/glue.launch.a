;license:MIT
;(c) 2023 by 4am
;
; glue code to launch games
;
; Public functions
; - Launch
;

VolNamesLo
         !byte <sVolProvingGrounds
         !byte <sVolNihonbashi
         !byte <sVolOConnor
         !byte <sVolVlad
         !byte <sVolEmperor
         !byte <sVolBrotherhood

VolNamesHi
         !byte >sVolProvingGrounds
         !byte >sVolNihonbashi
         !byte >sVolOConnor
         !byte >sVolVlad
         !byte >sVolEmperor
         !byte >sVolBrotherhood

;------------------------------------------------------------------------------
; Launch
; load game and jump to it
; in:    SelectedIndex contains index of game to launch (index into VolNamesLo/Hi)
;------------------------------------------------------------------------------
Launch
         +LDADDR sGameDirectory
         jsr   SetPath
         ldx   SelectedIndex
         lda   VolNamesLo, x
         ldy   VolNamesHi, x
         jsr   AddToPath

         jsr   SetPrefix
         !word gPathname

         +LDADDR sLauncherFilename
         jsr   SetPath

         jsr   LoadFile1Shot
         !word gPathname
         !word $0800
         !word $1400
         !word $1C00

         jsr   ROM_TEXT
         jsr   ROM_HOME
         jsr   ROM_NORMAL
         jsr   InstallBye
         jmp   $0800
